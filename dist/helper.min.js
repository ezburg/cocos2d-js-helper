var Cocos2dJsHelper=cc.Class.extend({COLLISION_SUCCESS:1e4,EVENT_DIE:"EVENT_DIE",EVENT_PASS_LEVEL:"EVENT_PASS_LEVEL",EVENT_PLAY:"play",EVENT_GAME_OVER:"game_over",EVENT_WIN_SCORE:"win_score",DIRECTION_LEFT:"left",DIRECTION_RIGHT:"right",CONFIG_PATH:"config.json",CONFIG_DEBUG:"debug",CONFIG_MAX_CHAPTER:"max_chapter",CONFIG_MAX_LEVEL:"max_level",CONFIG_BEST_SCORE:"best_score",configDefaults:{best_score:{invalid:null,"default":0}},SCENE_DURATION:1,MAX_LEVEL_COUNT:1e4,center:null,space:null,score:0,currentChapter:-1,currentLevel:-1,init:function(){var e=cc.winSize;this.center=cc.p(.5*e.width,.5*e.height),this.currentChapter=this.configMaxChapter(),this.currentLevel=this.configMaxLevel(),_.forEach(this.configDefaults,function(e,t){var i=this.config(t);i===e.invalid&&this.config(t,e["default"])}.bind(this))},label:function(e,t){return new cc.LabelTTF(e,"Arial",t||40)},animate:function(e,t,i,r){var n=[],c=0,s=null;if(r)for(c=t;c>=1;c--)s=cc.spriteFrameCache.getSpriteFrame(e+c+".png"),n.push(s);else for(c=1;t>=c;c++)s=cc.spriteFrameCache.getSpriteFrame(e+c+".png"),n.push(s);var a=new cc.Animation(n,i);return cc.animate(a)},addDebugNode:function(e){e._debugNode=new cc.PhysicsDebugNode(this.space),e._debugNode.visible=this.config(this.CONFIG_DEBUG),e.addChild(e._debugNode,9999)},logColors:function(e){var t=[];return _.forEach(e,function(e){t.push(cc.colorToHex(e))}),cc.log(t),t},cpVerts:function(e){var t=[];return _.forEach(e,function(e){t.push(e.x),t.push(e.y)}),t},$v2p:function(e){return cc.p(e.elements[0],e.elements[1])},p2$v:function(e){return $V([e.x,e.y])},rotate$v2ps:function(e,t,i){var r=[];return _.forEach(e,function(e){r.push(util.$v2p(e.rotate(t,i)))}),r},addBodyToSpace:function(e){e.isRogue()&&(this.space.addBody(e),_.forEach(e.shapeList,function(e){this.space.addShape(e)}.bind(this)))},shadowLabel:function(e,t){var i=new cc.LabelTTF(e,null,t);i.setFontFillColor(cc.color.WHITE);var r=cc.size(5,-5);return cc.sys.isNative&&(r=cc.size(2,-2)),i.enableShadow(cc.color.BLACK,r,10),i},config:function(e,t){if(cc.sys.isNative){var i=jsb.fileUtils.getWritablePath(),r=i+"/"+this.CONFIG_PATH,n="{}";jsb.fileUtils.isFileExist(r)&&(n=jsb.fileUtils.getStringFromFile(r));var c=JSON.parse(n);if(void 0===t)return c[e];c[e]=t,jsb.fileUtils.writeStringToFile(JSON.stringify(c),r)}else{if(void 0===t)return t=localStorage.getItem(e),JSON.parse(t);t=JSON.stringify(t),localStorage.setItem(e,t)}},configMaxChapter:function(){var e=this.config(this.CONFIG_MAX_CHAPTER);return _.isNumber(e)||(e=0,this.config(this.CONFIG_MAX_CHAPTER,e)),e},configMaxLevel:function(){var e=this.config(this.CONFIG_MAX_LEVEL);return _.isNumber(e)||(e=0,this.config(this.CONFIG_MAX_LEVEL,e)),e-this.configMaxChapter()*this.MAX_LEVEL_COUNT},saveLevel:function(e,t){void 0===e&&(e=this.currentChapter),void 0===t&&(t=this.currentLevel);var i=this.configMaxChapter();e>i&&this.config(this.CONFIG_MAX_CHAPTER,e),t=e*this.MAX_LEVEL_COUNT+t;var r=this.configMaxLevel();t>r&&this.config(this.CONFIG_MAX_LEVEL,t),this.currentChapter=this.configMaxChapter(),this.currentLevel=this.configMaxLevel()},nextChapterAndLevel:function(){var e=this.levelData[this.currentChapter].levels;return e.length-1>this.currentLevel?{chapter:this.currentChapter,level:this.currentLevel+1}:this.levelData.length-1>this.currentChapter?{chapter:this.currentChapter+1,level:0}:{chapter:this.currentChapter,level:this.currentLevel}},increaseLevel:function(){var e=this.nextChapterAndLevel();return e.chapter!=this.currentChapter||e.level!=this.currentLevel?(this.saveLevel(e.chapter,e.level),!0):!1},levelName:function(e,t){return void 0===e&&(e=this.currentChapter),void 0===t&&(t=this.currentLevel),e+1+" - "+(t+1)}});"undefined"!=typeof module&&"undefined"!=typeof module.exports?module.exports=Cocos2dJsHelper:"function"==typeof define&&define.amd?define([],function(){return Cocos2dJsHelper}):window.Cocos2dJsHelper=Cocos2dJsHelper;